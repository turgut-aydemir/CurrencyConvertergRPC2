<!DOCTYPE html>
<html>
<head>
    <title>gRPC-Web Client Example</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/grpc-web-client/dist/grpc-web-client.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/protobufjs/minimal/protobuf.min.js"></script>
    <script>
        var currencyConverterService = new proto.currency_converter.CurrencyConverterClient('http://localhost:8080');

        function convertCurrency() {
            var amount = parseFloat(document.getElementById('amount').value);
            var fromCurrency = document.getElementById('fromCurrency').value;
            var toCurrency = document.getElementById('toCurrency').value;

            var request = new proto.currency_converter.CurrencyConversionRequest();
            request.setAmount(amount);
            request.setFromCurrency(fromCurrency);
            request.setToCurrency(toCurrency);

            currencyConverterService.convertCurrency(request, {}, (err, response) => {
                if (err) {
                    console.error('Error:', err.message);
                    return;
                }

                var result = response.getResult();
                document.getElementById('result').innerText = result;
            });
        }
    </script>
</head>
<body>
    <h1>Currency Converter</h1>
    <label for="amount">Amount:</label>
    <input type="number" id="amount" value="10.0"><br>
    <label for="fromCurrency">From Currency:</label>
    <input type="text" id="fromCurrency" value="USD"><br>
    <label for="toCurrency">To Currency:</label>
    <input type="text" id="toCurrency" value="EUR"><br>
    <button onclick="convertCurrency()">Convert</button><br>
    <label for="result">Result:</label>
    <span id="result"></span>
</body>
</html>
